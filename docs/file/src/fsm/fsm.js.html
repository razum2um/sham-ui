<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/fsm/fsm.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/DI.js~DI.html">DI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shamUI.js~ShamUI.html">ShamUI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widget.js~Widget.html">Widget</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-inject">inject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DI">DI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Fsm">Fsm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FsmState">FsmState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FsmStates">FsmStates</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Widget">Widget</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-inject">inject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-options">options</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">decorators</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-options">options</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">fsm</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/fsm/fsm.js~FSM.html">FSM</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-states">states</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">fsm/states</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/fsm/states/ready.js~ReadyState.html">ReadyState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/fsm/states/registration.js~RegistrationState.html">RegistrationState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/fsm/states/rendering.js~RenderingState.html">RenderingState</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">utils</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utils/fsm.js~Fsm.html">Fsm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utils/fsm.js~State.html">State</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/fsm/fsm.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * &#x420;&#x430;&#x431;&#x43E;&#x442;&#x430; &#x441; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x44B;&#x43C; &#x430;&#x432;&#x442;&#x43E;&#x43C;&#x430;&#x442;&#x43E;&#x43C;
 * @module shamUI/fsm
 */

import { inject } from &apos;../DI&apos;;
import { Fsm } from &apos;../utils/fsm&apos;;
import ReadyState from &quot;./states/ready&quot;;
import RegistrationState from &quot;./states/registration&quot;;
import RenderingState from &quot;./states/rendering&quot;;

/**
 * Default states
 * @type {
 *  {
 *    ready:         ReadyState,
 *    registration:  RegistrationState,
 *    rendering:     RenderingState
 *  }
 * }
 */
export const states = {
    ready:         ReadyState,
    registration:  RegistrationState,
    rendering:     RenderingState
};

/**
 * &#x41A;&#x43B;&#x430;&#x441;&#x441; &#x43E;&#x441;&#x43D;&#x43E;&#x432;&#x43D;&#x43E;&#x433;&#x43E; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x43E;&#x433;&#x43E; &#x430;&#x442;&#x43E;&#x43C;&#x430;&#x442;&#x430;
 */
export class FSM extends Fsm {
    @inject ready = &apos;state:ready&apos;;
    @inject registration = &apos;state:registration&apos;;
    @inject rendering = &apos;state:rendering&apos;;
    @inject logger = &apos;logger&apos;;

    constructor() {
        super( ...arguments );
        this.widgets = [];
        this.idArray = [];
        this.byType = {};
        this.byId = {};
    }

    static initialState = &quot;ready&quot;;

    /**
     * &#x41F;&#x435;&#x440;&#x435;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x441;&#x435;
     * @see {@link ReadyState#all}
     */
    ALL() {
        this.handle( &quot;all&quot; );
    }

    /**
     * &#x41F;&#x435;&#x440;&#x435;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x442;&#x435;, ID &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x445; &#x43F;&#x435;&#x440;&#x435;&#x434;&#x430;&#x43D;&#x43D;&#x44B; &#x432; &#x430;&#x440;&#x433;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x445;
     * @see {@link ReadyState#only}
     * @param {...String} args &#x421;&#x43F;&#x438;&#x441;&#x43E;&#x43A; ID &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x43E;&#x432;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x435; &#x43D;&#x443;&#x436;&#x43D;&#x43E; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C;
     */
    ONLY( ...args ) {
        this.handle( &quot;only&quot;, args );
    }

    /**
     * &#x41F;&#x435;&#x440;&#x435;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x441;&#x435; &#x438; &#x43F;&#x435;&#x440;&#x435;&#x438;&#x43D;&#x438;&#x446;&#x438;&#x430;&#x43B;&#x438;&#x437;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C;
     * @see {@link ReadyState#forceAll}
     */
    FORCE_ALL() {
        this.handle( &quot;forceAll&quot; );
    }

    /**
     * &#x41E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x443;&#x43A;&#x430;&#x437;&#x430;&#x43D;&#x43D;&#x44B;&#x435; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x44B;. &#x41F;&#x43E;&#x43C;&#x438;&#x43C;&#x43E; &#x43F;&#x435;&#x440;&#x435;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x43A;&#x438; &#x435;&#x449;&#x435; &#x438; &#x43F;&#x43E;&#x43B;&#x44C;&#x43D;&#x43E;&#x441;&#x442;&#x44C;&#x435; &#x43F;&#x435;&#x440;&#x435;&#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x438;&#x443;&#x435;&#x442;
     * &#x443;&#x43A;&#x430;&#x437;&#x430;&#x43D;&#x43D;&#x44B;&#x435; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x44B;
     * @see {@link ReadyState#forceOnly}
     * @param {...String} args &#x421;&#x43F;&#x438;&#x441;&#x43E;&#x43A; ID &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x43E;&#x432;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x435; &#x43D;&#x443;&#x436;&#x43D;&#x43E; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C;
     */
    FORCE_ONLY( ...args ) {
        this.handle( &quot;forceOnly&quot;, args );
    }

    /**
     * &#x41F;&#x435;&#x440;&#x435;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x441; &#x443;&#x43A;&#x430;&#x437;&#x430;&#x43D;&#x43D;&#x44B;&#x43C;&#x438; &#x442;&#x438;&#x43F;&#x430;&#x43C;&#x438;
     * @param {...String} args &#x421;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x43E;&#x432;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x435; &#x43D;&#x443;&#x436;&#x43D;&#x43E; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x44C;
     * @see {@link ReadyState#onlyType}
     */
    ONLY_TYPE( ...args ) {
        this.handle( &quot;onlyType&quot;, args );
    }

    /**
     * &#x417;&#x430;&#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;
     * @param {*}         widget.ID                     &#x418;&#x434;&#x435;&#x43D;&#x442;&#x438;&#x444;&#x438;&#x43A;&#x430;&#x442;&#x43E;&#x440;
     * @param {Function} [widget.bind]                   &#x424;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x43D;&#x430;&#x432;&#x435;&#x448;&#x438;&#x432;&#x430;&#x44E;&#x449;&#x430;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x438;
     * @param {Function} [widget.render]                 &#x424;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x43A;&#x438;.
     * @param {Function} [widget.destroy]                &#x424;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x43E;&#x442;&#x432;&#x44F;&#x437;&#x44B;&#x432;&#x430;&#x44E;&#x449;&#x430;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x438;
     * @param {Object}   [widget.options]                &#x41E;&#x43F;&#x446;&#x438;&#x438; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x430;
     * @param {Array}    [widget.options.types]          &#x41C;&#x430;&#x441;&#x441;&#x438;&#x432; &#x442;&#x438;&#x43F;&#x43E;&#x432;
     * @param {Function} [widget.options.beforeRegister] &#x414;&#x43E; &#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;
     * @param {Function} [widget.options.afterRegister]  &#x41F;&#x43E;&#x441;&#x43B;&#x435; &#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;
     * @param {Function} [widget.options.beforeBind]     &#x414;&#x43E; &#x43D;&#x430;&#x432;&#x435;&#x448;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432;
     * @param {Function} [widget.options.afterBind]      &#x41F;&#x43E;&#x441;&#x43B;&#x435; &#x43D;&#x430;&#x432;&#x435;&#x448;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432;
     * @param {Function} [widget.options.beforeRender]   &#x414;&#x43E; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x43A;&#x438; &#x44D;&#x442;&#x43E;&#x433;&#x43E; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x430;
     * @param {Function} [widget.options.afterRender]    &#x41F;&#x43E;&#x441;&#x43B;&#x435; &#x43E;&#x442;&#x440;&#x438;&#x441;&#x43E;&#x432;&#x43A;&#x438; &#x44D;&#x442;&#x43E;&#x433;&#x43E; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x430;
     * @param {Function} [widget.options.beforeDestroy]  &#x414;&#x43E; &#x43E;&#x442;&#x432;&#x44F;&#x437;&#x43A;&#x438; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432;
     * @param {Function} [widget.options.afterDestroy]   &#x41F;&#x43E;&#x441;&#x43B;&#x435; &#x43E;&#x442;&#x432;&#x44F;&#x437;&#x43A;&#x438; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432;
     * @see {@link RegistrationState#register}
     */
    register( widget ) {
        this.handle( &quot;register&quot;, widget );
    }

    /**
     * &#x420;&#x430;&#x437;&#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;
     * @param {String} widgetId &#x418;&#x434;&#x435;&#x43D;&#x442;&#x438;&#x444;&#x438;&#x43A;&#x430;&#x442;&#x43E;&#x440; &#x432;&#x438;&#x434;&#x436;&#x435;&#x442;&#x430;
     */
    unregister( widgetId ) {
        this.handle( &quot;unregister&quot;, widgetId );
    }

    /**
     * Hook for handle exception
     * @param {Object} exception
     * @private
     */
    handleException( exception ) {
        this.logger.error( exception );
        super.handleException( ...arguments );
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
